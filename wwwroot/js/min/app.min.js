angular.module("userManagement",[]).service("apiCaller",["$http",function(t){var r="/api/user/";this.getUser=function(e){return t.get(r+e).then(function(e){return e.data}).catch(function(e){throw e})},this.getUsers=function(e){return t.get(r).then(function(e){return e.data}).catch(function(e){throw e})},this.createUser=function(e){return t.post(r,e).then(function(e){return e}).catch(function(e){throw e})},this.updateUser=function(e,n){return t.put(r+e,n).then(function(e){return e}).catch(function(e){throw e})},this.deleteUser=function(e){return t.delete(r+e).then(function(e){return e}).catch(function(e){throw e})}}]).controller("mainController",["apiCaller","$scope","$window","$log",function(t,n,r,i){function u(e,n){i.error(e),i.error(n)}function o(e){n.users.splice(e,1)}n.users=[],this.$onInit=function(){t.getUsers().then(function(e){n.users=e}).catch(function(e){u("Error loading users:",e)})},n.save=function(n){(function(e){return e.name?isNaN(parseInt(e.age))?(r.alert("Age is required."),!1):!!e.address||(r.alert("Address is required."),!1):(r.alert("Name is required."),!1)})(n)&&(n.id?t.updateUser(n.id,n).then(function(){n.editing=!1}).catch(function(e){u("Error updating user:",e)}):t.createUser(n).then(function(e){n.id=e.data.id,n.editing=!1}).catch(function(e){u("Error creating user:",e)}))},n.addNewUser=function(){n.users.push({name:"",age:void 0,address:"",editing:!0})},n.removeUser=function(e,n){e.id?r.confirm("Are you sure?")&&t.deleteUser(e.id).then(function(){o(n)}).catch(function(e){u("Error removing user:",e)}):o(n)}}]);